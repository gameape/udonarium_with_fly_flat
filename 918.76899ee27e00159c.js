"use strict";(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[918],{1788:(w,v,m)=>{m.d(v,{G:()=>h});var p=m(8518);class h{get hasPassword(){return this.peers.some(s=>s.hasPassword)}constructor(s="",a="",c=[]){this.id="",this.name="",this.peers=[],this.id=s,this.name=a,this.peers=c}filterByPassword(s){return this.peers.filter(a=>a.verifyPassword(s))}static listFrom(s){let a=s.map(o=>p.y.parse(o)).sort((o,l)=>o.peerId>l.peerId?1:o.peerId<l.peerId?-1:0),c=new Map;for(let o of a)if(o.isRoom){let l=o.roomId+o.roomName,_=c.get(l)??new h(o.roomId,o.roomName);_.peers.push(o),c.set(l,_)}return c.size<1?[]:Array.from(c.values()).sort((o,l)=>o.id+o.name<l.id+l.name?-1:o.id+o.name>l.id+l.name?1:0)}}},4136:(w,v,m)=>{m.d(v,{p:()=>L});var p=m(467),h=m(9757);class L{static#e=this.updateWebRTCStatsTimer=null;static#t=this.monitoringConnections=new Set;constructor(){}static add(a){this.monitoringConnections.add(a),a.updateStatsAsync(),this.restart()}static remove(a){this.monitoringConnections.delete(a)}static restart(){null==this.updateWebRTCStatsTimer?this.updateWebRTCStatsTimer=new h.b(()=>this.doMonitoringAsync(),this.calcIntervalTime()):this.updateWebRTCStatsTimer.isActive||this.updateWebRTCStatsTimer.reset(this.calcIntervalTime())}static calcIntervalTime(){return Math.min(2e3+1e3*this.monitoringConnections.size,8e3)}static doMonitoringAsync(){var a=this;return(0,p.A)(function*(){for(let c of a.monitoringConnections)c.open?yield c.updateStatsAsync():a.remove(c);a.monitoringConnections.size<1?a.updateWebRTCStatsTimer=null:a.restart()})()}}},5643:(w,v,m)=>{m.d(v,{X:()=>L,a:()=>h});var p=m(467),h=function(s){return s.UNKNOWN="unknown",s.RELAY="relay",s.PRFLX="prflx",s.SRFLX="srflx",s.HOST="host",s}(h||{});class L{constructor(a){this.peerConnection=a,this.candidateType=h.UNKNOWN}updateAsync(){var a=this;return(0,p.A)(function*(){let c=null;try{c=yield a.peerConnection.getStats()}catch(d){console.warn(d)}if(null==c)return void(a.candidateType=h.UNKNOWN);let y=[],o=[],l=[],_=[],b=[],C=[],E=[];c.forEach(d=>{0<=d.type.indexOf("candidate-pair")&&y.push(d),0<=d.type.indexOf("local-candidate")&&o.push(d),0<=d.type.indexOf("remote-candidate")&&l.push(d)}),y.forEach(d=>{"succeeded"===d.state&&(_.push(d.localCandidateId),b.push(d.remoteCandidateId))}),o.forEach(d=>{_.includes(d.id)&&C.push(d)}),l.forEach(d=>{b.includes(d.id)&&E.push(d)});let O=h.UNKNOWN,A=Object.values(h);C.concat(E).forEach(d=>{let R=A.indexOf(d.candidateType);A.indexOf(O)<R&&(O=A[R])}),a.candidateType=O})()}}},9138:(w,v,m)=>{var p;m.d(v,{_:()=>p}),(p||(p={})).diff=function L(s,a){let c=[],y=[],o=!1,l=!1;for(let _ of s.concat(a))o=s.includes(_),l=a.includes(_),o&&!l?c.push(_):!o&&l&&y.push(_);return{diff1:c,diff2:y}}},750:(w,v,m)=>{m.d(v,{D:()=>h,S:()=>s});var p=m(467);function h(o){return L.apply(this,arguments)}function L(){return(L=(0,p.A)(function*(o){return c(new CompressionStream("gzip"),o)})).apply(this,arguments)}function s(o){return a.apply(this,arguments)}function a(){return(a=(0,p.A)(function*(o){return c(new DecompressionStream("gzip"),o)})).apply(this,arguments)}function c(o,l){return y.apply(this,arguments)}function y(){return(y=(0,p.A)(function*(o,l){const _=new Blob([l]).stream().pipeThrough(o);return new Uint8Array(yield new Response(_).arrayBuffer())})).apply(this,arguments)}},4356:w=>{var p,v="object"==typeof Reflect?Reflect:null,m=v&&"function"==typeof v.apply?v.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)};p=v&&"function"==typeof v.ownKeys?v.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var L=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}w.exports=s,w.exports.once=function d(t,e){return new Promise(function(n,r){function i(u){t.removeListener(e,f),r(u)}function f(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}x(t,e,f,{once:!0}),"error"!==e&&function R(t,e,n){"function"==typeof t.on&&x(t,"error",e,n)}(t,i,{once:!0})})},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function y(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function o(t,e,n,r){var i,f,u;if(c(n),void 0===(f=t._events)?(f=t._events=Object.create(null),t._eventsCount=0):(void 0!==f.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),f=t._events),u=f[e]),void 0===u)u=f[e]=n,++t._eventsCount;else if("function"==typeof u?u=f[e]=r?[n,u]:[u,n]:r?u.unshift(n):u.push(n),(i=y(t))>0&&u.length>i&&!u.warned){u.warned=!0;var g=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");g.name="MaxListenersExceededWarning",g.emitter=t,g.type=e,g.count=u.length,function h(t){console&&console.warn&&console.warn(t)}(g)}return t}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function b(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function A(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):E(i,i.length)}function C(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function E(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function x(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,function i(f){r.once&&t.removeEventListener(e,i),n(f)})}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||L(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),s.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||L(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return y(this)},s.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i="error"===e,f=this._events;if(void 0!==f)i=i&&void 0===f.error;else if(!i)return!1;if(i){var u;if(n.length>0&&(u=n[0]),u instanceof Error)throw u;var g=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw g.context=u,g}var T=f[e];if(void 0===T)return!1;if("function"==typeof T)m(T,this,n);else{var M=T.length,N=E(T,M);for(r=0;r<M;++r)m(N[r],this,n)}return!0},s.prototype.on=s.prototype.addListener=function(e,n){return o(this,e,n,!1)},s.prototype.prependListener=function(e,n){return o(this,e,n,!0)},s.prototype.once=function(e,n){return c(n),this.on(e,_(this,e,n)),this},s.prototype.prependOnceListener=function(e,n){return c(n),this.prependListener(e,_(this,e,n)),this},s.prototype.off=s.prototype.removeListener=function(e,n){var r,i,f,u,g;if(c(n),void 0===(i=this._events))return this;if(void 0===(r=i[e]))return this;if(r===n||r.listener===n)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if("function"!=typeof r){for(f=-1,u=r.length-1;u>=0;u--)if(r[u]===n||r[u].listener===n){g=r[u].listener,f=u;break}if(f<0)return this;0===f?r.shift():function O(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,f),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,g||n)}return this},s.prototype.removeAllListeners=function(e){var n,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var u,f=Object.keys(r);for(i=0;i<f.length;++i)"removeListener"!==(u=f[i])&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(n=r[e]))this.removeListener(e,n);else if(void 0!==n)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this},s.prototype.listeners=function(e){return b(this,e,!0)},s.prototype.rawListeners=function(e){return b(this,e,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):C.call(t,e)},s.prototype.listenerCount=C,s.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}}}]);